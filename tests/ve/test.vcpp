#include <veda_device.h>
#include <cstdio>

extern "C" VEDAresult ve_test(VEDAdeviceptr vptr, VEDAdeviceptr newPtr, const size_t cnt) {
	int* out;
	CVEDA(vedaMemAllocPtr((void**)&out, newPtr, cnt * sizeof(int)));

	int* in;
	CVEDA(vedaMemPtr(&in, vptr));
	CVEDA(vedaMemFree(vptr));

	#pragma _NEC ivdep
	for(size_t i = 0; i < cnt; i++)
		out[i] = cnt - 1 - i;
	
	return VEDA_SUCCESS;
}
