IF(NOT NLC_FOUND)
	FILE(GLOB NLC_PATHS "/opt/nec/ve/nlc/*")
	LIST(SORT NLC_PATHS)
	LIST(REVERSE NLC_PATHS)
	LIST(LENGTH NLC_PATHS NLC_LEN)

	IF(NLC_LEN GREATER 0)
		LIST(GET NLC_PATHS 0 NLC_PATH)
		STRING(REGEX MATCH "[0-9]+.[0-9]+.[0-9]+" NLC_VERSION ${NLC_PATH})
		MESSAGE(STATUS "Found NLC ${NLC_VERSION}")

		SET(NLC_PATH ${NLC_PATH} CACHE PATH "Path to NEC NLC")
		SET(NLC_VERSION ${NLC_VERSION} CACHE STRING "NEC NLC Version")
		SET(NLC_FOUND TRUE)
	ELSEIF(${NLC_FIND_REQUIRED})
		MESSAGE(FATAL_ERROR "Unable to detect NEC NLC")
	ELSE()
		SET(NLC_FOUND FALSE)
		SET(NLC_PATH)
		SET(NLC_VERSION)
	ENDIF()

	SET(NLC_FOUND ${NLC_FOUND} CACHE BOOL "NEC NLC found?")
	SET(NLC_PATH ${NLC_PATH} CACHE PATH "Path to NEC NLC")
	SET(NLC_VERSION ${NLC_VERSION} CACHE STRING "NEC NLC Version")

	UNSET(NLC_PATHS)
ENDIF()